# 10 - Malware e Deteção

O malware pode existir e propagar-se de muitas formas:
- exploração de pacotes de segurança de sistemas, que muitas vezes são ignorados mas que revelam detalhes de falta de segurança;
- `malvertising`, onde o malware é injectado no browser através de anúncios provenientes de servidores infectados;
- roubo de credenciais por parte de aplicações não fidedignas;
- deturpar o equipamento de fabrico;
- deturpar o software no fabrico do mesmo;

## Botnets

Rede de computadores com um sistema de controlo e comando comum que é capaz de enviar comandos pela rede. Existem dois tipos de arquitetura, ou **centralizada** (com servidores centrais para maior robustez do serviço) ou **peer-to-peer** por hierarquia. Existem também dois tipos de fluxo: **push** (o servidor envia comandos aos bots) ou **pull** (o bot pergunta ao servidor se há alguma tarefa).

### Deteção de botnets

- Detetar o malware na máquina comprometida;
- Detetar o tráfego pela rede;
- Expôr máquinas (*honeypots*) para serem comprometidas e monitorizadas;

### Combate de botnets

- Limpar máquinas comprometidas ou isolacontrolar computadores da internet. das na rede;
- Isolar e desligar o C2 (sistema de comando de controlo);
- Tomar o controlo da C2 e usá-la para desativar o botnet;

## Técnicas de Deteção

- `IDS Intrusion Detection System`, deteção ocorre depois do ataque ter sido concretizado
- `IPS Intrusion Prevention System`, intervenção rápida para evitar o ataque
- `HIDS`, IDS no Host;
- `NIDS`, IDS na Network;

Nos sistemas de deteção existem sempre falsos positivos e falsos negativos. O desafio é sempre equilibrar estes dois parâmetros de acordo com o sistema em implementar. O alerta pode ser dado por diversos fatores:

- **Signature-based**, reconhecimento de assinaturas e padrões de ataques já conhecidos;
- **Anomalias**, como acesso à rede anómalo, acesso a ficheiros sensíveis, deteta uma grande gama de ataques mas é pouco preciso de eventos raros;
- **Integridade/espeficicação**, com manutenção de registos para detectar alterações de ficheiros críticos

### Antivirus

